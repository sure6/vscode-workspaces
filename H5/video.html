<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="//nos.netease.com/vod163/nePublisher.min.js"></script>
</head>

<body>
    <div id="my-publisher"></div>
    <script>
        var myPublisher = new nePublisher(
            'my-publisher', // String 必选 推流器容器id
            {   // Object 可选 推流初始化videoOptions参数
                videoWidth: 640,    // Number 可选 推流分辨率 宽度 default 640
                videoHeight: 480,   // Number 可选 推流分辨率 高度 default 480
                fps: 15,            // Number 可选 推流帧率 default 15
                bitrate: 600,       // Number 可选 推流码率 default 600
                video: true,       // Boolean 可选 是否推流视频 default true
                audio: true       // Boolean 可选 是否推流音频 default true
            }, { // Object 可选 推流初始化flashOptions参数
                previewWindowWidth: 862,    // Number 可选 预览窗口宽度 default 862
                previewWindowHeight: 486,   // Number 可选 预览窗口高度 default 446
                wmode: 'transparent',       // String 可选 flash显示模式 default transparent
                quality: 'high',            // String 可选 flash质量 default high
                allowScriptAccess: 'always' // String 可选 flash跨域允许 default always
            }, function () {
                /*
                    function 可选 初始化成功的回调函数
                    可在该回调中调用getCameraList和getMicroPhoneList方法获取 摄像头和麦克风列表
                    cameraList = this.getCameraList();
                    microPhoneList = this.getMicroPhoneList();
                */
                cameraList = this.getCameraList();
                microPhoneList = this.getMicroPhoneList();
            }, function (code, desc) {
                /*
                    function 可选 初始化失败后的回调函数
                    @param code 错误代码
                    @param desc 错误信息
                    判断是否有错误代码传入检查初始化时是否发生错误
                    若有错误可进行相应的错误提示
                */
            });

        // @参数 cameraIndex {Number} 必选 从getCameraList函数获取的摄像头列表中选择要预览的摄像头的索引
        // @参数 cameraWidth {Number} 可选 摄像头采集分辨率，宽  default: 1280
        // @参数 cameraHeight {Number} 可选 摄像头采集分辨率，高  default: 720
        myPublisher.startPreview(getCameraIndex(), 1280, 720);
        
        myPublisher.startPublish(
    'rtmp://pxxx.live.126.net/live/...', // String 必选 要推流的频道地址
    { // Object 可选 推流参数
        videoWidth: 640,    // Number 可选 推流分辨率 宽度 default 640
        videoHeight: 480,   // Number 可选 推流分辨率 高度 default 480
        fps: 15,            // Number 可选 推流帧率 default 15
        bitrate: 600,       // Number 可选 推流码率 default 600
        video: true,       // Boolean 可选 是否推流视频 default true
        audio: true       // Boolean 可选 是否推流音频 default true
    }, function(code, desc) {
        /*
            function 可选 推流过程中发生错误进行回调
            @param code 错误代码
            @param desc 错误信息
            判断是否有错误代码传入推流过程中是否发生错误
            若有错误可进行相应的错误提示
        */
    });
    </script>
</body>

</html>